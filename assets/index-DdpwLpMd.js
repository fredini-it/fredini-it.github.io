(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))l(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&l(s)}).observe(document,{childList:!0,subtree:!0});function o(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerPolicy&&(r.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?r.credentials="include":e.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(e){if(e.ep)return;e.ep=!0;const r=o(e);fetch(e.href,r)}})();function p(t){return t.split(`
`).map(o=>o.split(",")).slice(1).map(o=>({name:o[0].trim(),link:o[1].trim()}))}async function g(t){return new Promise(n=>{const o=new Image;o.onload=()=>n({width:o.width,height:o.height}),o.onerror=()=>n({width:0,height:0}),o.src=t})}async function y(t){const n=document.getElementById("gallery"),o=t.map(e=>g(e.link)),l=await Promise.all(o);t.forEach((e,r)=>{const s=l[r],h=s.height/s.width*100,d=document.createElement("div");d.className=`poster-container masonry-brick ${s.width/s.height>1.2?"wide":""}`;const a=document.createElement("a");e.name==="render"?(a.href="/render.html",a.setAttribute("aria-label","Go to render")):(a.href=`/pin/${Math.floor(Math.random()*1e16)}/`,a.setAttribute("aria-label",`Página do Pin ${e.name}`)),a.tabIndex=0;const c=document.createElement("div");c.className="poster masonry-content",c.style.position="relative";const u=document.createElement("div");u.style.paddingBottom=`${h}%`,c.appendChild(u);const i=document.createElement("img");i.src=e.link,i.alt=e.name==="render"?"Link to render":`Contém uma imagem de: ${e.name}`,i.setAttribute("loading","lazy"),i.style.position="absolute",i.style.top="0",i.style.left="0",i.style.width="100%",i.style.height="100%",i.style.objectFit="cover",c.appendChild(i),a.appendChild(c),d.appendChild(a),n.appendChild(d),m(d)}),w()}function m(t){const n=document.querySelector(".masonry"),o=parseInt(window.getComputedStyle(n).getPropertyValue("grid-row-gap")),l=parseInt(window.getComputedStyle(n).getPropertyValue("grid-auto-rows")),e=t.querySelector(".masonry-content").getBoundingClientRect().height,r=Math.ceil((e+o)/(l+o))||1;t.style.gridRowEnd=`span ${r}`}function f(){const t=document.getElementsByClassName("masonry-brick");for(let n=0;n<t.length;n++)m(t[n])}function w(){const t=document.getElementsByClassName("masonry-brick");for(let n=0;n<t.length;n++)imagesLoaded(t[n],o=>{m(o.elements[0])})}["load","resize"].forEach(t=>window.addEventListener(t,f));fetch("posters.csv").then(t=>t.text()).then(t=>{const n=p(t);y(n)}).catch(t=>console.error("Error loading CSV:",t));
